"use strict";define(function(){function a(a){var b=this;this.dbName="kv-"+a,this.ready=new Promise(function(a,c){var d=window.indexedDB.open(b.dbName);d.onupgradeneeded=function(a){b.db=a.target.result,b.db.createObjectStore("store")},d.onsuccess=function(c){b.db=c.target.result,a()},d.onerror=function(a){b.db=a.target.result,c(a)}})}return a.prototype.get=function(a){var b=this;return this.ready.then(function(){return new Promise(function(c,d){var e=b.getStore().get(a);e.onsuccess=function(a){return c(a.target.result)},e.onerror=d})})},a.prototype.getStore=function(){return this.db.transaction(["store"],"readwrite").objectStore("store")},a.prototype.set=function(a,b){var c=this;return this.ready.then(function(){return new Promise(function(d,e){var f=c.getStore().put(b,a);f.onsuccess=d,f.onerror=e})})},a.prototype.delete=function(a){var b=this;return this.ready.then(function(){return new Promise(function(c,d){var e=b.getStore().delete(a);e.onsuccess=c,e.onerror=d})})},a.deleteDatabase=function(a){window.indexedDB.deleteDatabase(a)},a});