"use strict";define(["modules/default/defaultview","src/util/util","jsoneditor","src/util/context","jquery","ace/ace"],function(a,b,c,d,e,f){function g(){this._id=b.getNextUniqueId()}return b.loadCss("components/jsoneditor/dist/jsoneditor.min.css"),e.extend(!0,g.prototype,a,{init:function(){this.dom||(this.dom=e('<div id="'+this._id+'"></div>').css({height:"100%",width:"100%"}),this.module.getDomContent().html(this.dom))},blank:{value:function(){this.editor.set({})}},inDom:function(){var a=this;this.dom.empty();var b=this.module.getConfiguration("editable");"text"===b&&(b="code"),this.expand=!!this.module.getConfiguration("expanded",!1)[0],this.storeObject=!!this.module.getConfiguration("storeObject",!1)[0],this.changeInputData(DataObject.check(JSON.parse(this.module.getConfiguration("storedObject")),!0)),this.editor=new c(document.getElementById(this._id),{mode:b,modes:["view","tree","code"],ace:f,theme:"ace/theme/textmate",onChange:function(){var b;try{b=a.editor.get()}catch(a){b="Invalid JSON: "+a.message}a.module.controller.sendValue(b,"onObjectChange")},onModeChange:function(){return a.setSendButton()},search:this.module.getConfigurationCheckbox("searchBox","search")}),this.module.getConfigurationCheckbox("sendButton","send")&&this.setSendButton(),this.update.value.call(this,this.inputData),this.resolveReady()},setSendButton:function(){var a=this,b=this.dom.find(".jsoneditor-menu").prepend('<button class="send" style="width: 45px; float: left; background: none; font-size: small;">\n    <span style="font-size: 10pt; color: black">Send</span>\n</button>').find("button.send");b.on("click",function(){a.module.controller.sendValue(a.editor.get(),"onObjectSend")}).on("mouseenter",function(){e(this).css("background-color","#f0f2f5")}).on("mouseleave",function(){e(this).css("background-color","#e3eaf6")}).css("background-color","#e3eaf6")},update:{value:function(a){this.module.getConfigurationCheckbox("displayValue","display")&&(a=a.get()),this.changeInputData(a);var b=this.inputData.resurrect();this.editor.set(JSON.parse(JSON.stringify(b))),this.expand&&this.editor.expandAll&&this.editor.expandAll(),this.module.controller.sendValue(b,"onObjectChange")}},changeInputData:function(a){this.inputData!==a&&(this.inputData=a)}}),g});